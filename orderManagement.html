<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velvra Admin - Order Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .sidebar-link {
            transition: all 0.3s ease;
        }
        
        .sidebar-link:hover {
            transform: translateX(5px);
        }
        
        .order-card {
            transition: all 0.3s ease;
        }
        
        .order-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            animation: slideUp 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 8px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #9333ea;
        }
        
        .timeline-item {
            position: relative;
            padding-left: 20px;
            border-left: 2px solid #e5e7eb;
            padding-bottom: 1rem;
        }
        
        .timeline-item:last-child {
            border-left: none;
        }
        
        .priority-indicator {
            width: 4px;
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            border-radius: 4px 0 0 4px;
        }
        
        .priority-high {
            background-color: #ef4444;
        }
        
        .priority-medium {
            background-color: #f59e0b;
        }
        
        .priority-low {
            background-color: #10b981;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Sidebar -->
    <div id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-gray-900 text-white z-50 transform -translate-x-full lg:translate-x-0 transition-transform duration-300">
        <div class="p-6">
            <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Velvra Admin</h1>
            <p class="text-gray-400 text-sm mt-1">Premium Marketplace</p>
        </div>
        
        <nav class="mt-8">
            <a href="index.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-dashboard w-5"></i>
                <span class="ml-3">Dashboard</span>
            </a>
            <a href="users.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-users w-5"></i>
                <span class="ml-3">User Management</span>
            </a>
            <a href="sellers.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-store w-5"></i>
                <span class="ml-3">Seller Management</span>
            </a>
            <a href="products.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-box w-5"></i>
                <span class="ml-3">Products</span>
            </a>
            <a href="#" class="sidebar-link flex items-center px-6 py-3 bg-purple-600 text-white">
                <i class="fas fa-shopping-cart w-5"></i>
                <span class="ml-3">Orders</span>
            </a>
            <a href="inventory.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-warehouse w-5"></i>
                <span class="ml-3">Inventory</span>
            </a>
            <a href="content.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-file-alt w-5"></i>
                <span class="ml-3">Content Manager</span>
            </a>
            <a href="promotions.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-tag w-5"></i>
                <span class="ml-3">Promotions</span>
            </a>
            <a href="reports.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-chart-line w-5"></i>
                <span class="ml-3">Reports</span>
            </a>
            <a href="support.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-headset w-5"></i>
                <span class="ml-3">Support</span>
            </a>
            <a href="finance.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-dollar-sign w-5"></i>
                <span class="ml-3">Finance</span>
            </a>
            <a href="settings.html" class="sidebar-link flex items-center px-6 py-3 hover:bg-gray-800">
                <i class="fas fa-cog w-5"></i>
                <span class="ml-3">Settings</span>
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="lg:ml-64">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between px-6 py-4">
                <button id="sidebarToggle" class="lg:hidden">
                    <i class="fas fa-bars text-gray-600"></i>
                </button>
                
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="search" id="searchInput" placeholder="Search orders..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 w-64">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button class="relative">
                        <i class="fas fa-bell text-gray-600"></i>
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
                    </button>
                    <div class="flex items-center space-x-2">
                        <img src="https://ui-avatars.com/api/?name=Admin+User&background=7c3aed&color=fff" alt="Admin" class="w-8 h-8 rounded-full">
                        <span class="text-sm font-medium">Admin User</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Order Management Content -->
        <main class="p-6">
            <!-- Page Title and Actions -->
            <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800">Order Management</h2>
                    <p class="text-gray-600 mt-1">Track and manage all customer orders</p>
                </div>
                <div class="mt-4 md:mt-0 flex space-x-3">
                    <button class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center">
                        <i class="fas fa-download mr-2"></i>
                        Export Orders
                    </button>
                    <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                        <i class="fas fa-filter mr-2"></i>
                        Filter
                    </button>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-6">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Total Orders</p>
                            <p class="text-2xl font-bold text-gray-800">3,426</p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-lg">
                            <i class="fas fa-shopping-cart text-blue-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Pending</p>
                            <p class="text-2xl font-bold text-gray-800">156</p>
                        </div>
                        <div class="bg-yellow-100 p-3 rounded-lg">
                            <i class="fas fa-clock text-yellow-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Processing</p>
                            <p class="text-2xl font-bold text-gray-800">89</p>
                        </div>
                        <div class="bg-purple-100 p-3 rounded-lg">
                            <i class="fas fa-cog text-purple-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Shipped</p>
                            <p class="text-2xl font-bold text-gray-800">234</p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-lg">
                            <i class="fas fa-truck text-blue-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Delivered</p>
                            <p class="text-2xl font-bold text-gray-800">2,834</p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-lg">
                            <i class="fas fa-check-circle text-green-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Cancelled</p>
                            <p class="text-2xl font-bold text-gray-800">113</p>
                        </div>
                        <div class="bg-red-100 p-3 rounded-lg">
                            <i class="fas fa-times-circle text-red-600"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filter Tabs -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6">
                <div class="flex flex-wrap border-b border-gray-200 overflow-x-auto">
                    <button class="px-6 py-3 text-sm font-medium text-purple-600 border-b-2 border-purple-600 whitespace-nowrap" data-tab="all">
                        All Orders
                    </button>
                    <button class="px-6 py-3 text-sm font-medium text-gray-600 hover:text-gray-800 whitespace-nowrap" data-tab="pending">
                        Pending
                    </button>
                    <button class="px-6 py-3 text-sm font-medium text-gray-600 hover:text-gray-800 whitespace-nowrap" data-tab="processing">
                        Processing
                    </button>
                    <button class="px-6 py-3 text-sm font-medium text-gray-600 hover:text-gray-800 whitespace-nowrap" data-tab="shipped">
                        Shipped
                    </button>
                    <button class="px-6 py-3 text-sm font-medium text-gray-600 hover:text-gray-800 whitespace-nowrap" data-tab="delivered">
                        Delivered
                    </button>
                    <button class="px-6 py-3 text-sm font-medium text-gray-600 hover:text-gray-800 whitespace-nowrap" data-tab="cancelled">
                        Cancelled
                    </button>
                    <button class="px-6 py-3 text-sm font-medium text-gray-600 hover:text-gray-800 whitespace-nowrap" data-tab="refunded">
                        Refunded
                    </button>
                </div>
            </div>

            <!-- Orders List -->
            <div id="ordersContainer" class="space-y-4">
                <!-- Order cards will be inserted here by JavaScript -->
            </div>

            <!-- Pagination -->
            <div class="flex items-center justify-center mt-8">
                <div class="flex space-x-2">
                    <button class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-100">Previous</button>
                    <button class="px-3 py-1 bg-purple-600 text-white rounded-md text-sm">1</button>
                    <button class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-100">2</button>
                    <button class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-100">3</button>
                    <span class="px-3 py-1">...</span>
                    <button class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-100">Next</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Order Detail Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content bg-white rounded-xl shadow-xl max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-semibold text-gray-800">Order Details</h3>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div id="modalContent">
                    <!-- Modal content will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock order data
        const mockOrders = [
            {
                id: 1,
                orderNumber: 'ORD-2024-0001',
                customer: {
                    name: 'Sarah Johnson',
                    email: 'sarah.j@email.com',
                    phone: '+1 555-0123',
                    avatar: 'https://ui-avatars.com/api/?name=Sarah+Johnson&background=random'
                },
                items: [
                    {
                        name: 'Premium Leather Jacket',
                        seller: 'Fashion Hub',
                        price: 299.99,
                        quantity: 1,
                        image: 'https://images.unsplash.com/photo-1551028719-00167b16eac5?w=100'
                    },
                    {
                        name: 'Designer Silk Dress',
                        seller: 'Style Central',
                        price: 189.99,
                        quantity: 1,
                        image: 'https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=100'
                    }
                ],
                total: 489.98,
                status: 'pending',
                priority: 'high',
                paymentMethod: 'Credit Card',
                paymentStatus: 'paid',
                shippingAddress: '123 Main St, New York, NY 10001',
                orderDate: '2024-03-20 10:30:00',
                deliveryDate: null,
                trackingNumber: null,
                notes: 'Customer requested gift wrapping'
            },
            {
                id: 2,
                orderNumber: 'ORD-2024-0002',
                customer: {
                    name: 'Michael Chen',
                    email: 'mchen@email.com',
                    phone: '+1 555-0124',
                    avatar: 'https://ui-avatars.com/api/?name=Michael+Chen&background=random'
                },
                items: [
                    {
                        name: 'Canvas Backpack',
                        seller: 'Trendy Boutique',
                        price: 49.99,
                        quantity: 2,
                        image: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=100'
                    }
                ],
                total: 99.98,
                status: 'processing',
                priority: 'medium',
                paymentMethod: 'PayPal',
                paymentStatus: 'paid',
                shippingAddress: '456 Oak Ave, Los Angeles, CA 90001',
                orderDate: '2024-03-19 14:45:00',
                deliveryDate: null,
                trackingNumber: null,
                notes: null
            },
            {
                id: 3,
                orderNumber: 'ORD-2024-0003',
                customer: {
                    name: 'Emma Williams',
                    email: 'emma.w@email.com',
                    phone: '+1 555-0125',
                    avatar: 'https://ui-avatars.com/api/?name=Emma+Williams&background=random'
                },
                items: [
                    {
                        name: 'Kids Winter Coat',
                        seller: 'Kids Paradise',
                        price: 79.99,
                        quantity: 1,
                        image: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100'
                    }
                ],
                total: 79.99,
                status: 'shipped',
                priority: 'low',
                paymentMethod: 'Debit Card',
                paymentStatus: 'paid',
                shippingAddress: '789 Pine St, Chicago, IL 60601',
                orderDate: '2024-03-18 09:15:00',
                deliveryDate: null,
                trackingNumber: 'TRK123456789',
                notes: null
            },
            {
                id: 4,
                orderNumber: 'ORD-2024-0004',
                customer: {
                    name: 'James Davis',
                    email: 'jdavis@email.com',
                    phone: '+1 555-0126',
                    avatar: 'https://ui-avatars.com/api/?name=James+Davis&background=random'
                },
                items: [
                    {
                        name: 'Luxury Watch',
                        seller: 'Premium Styles',
                        price: 599.99,
                        quantity: 1,
                        image: 'https://images.unsplash.com/photo-1524805444758-089113d48a6d?w=100'
                    }
                ],
                total: 599.99,
                status: 'delivered',
                priority: 'low',
                paymentMethod: 'Credit Card',
                paymentStatus: 'paid',
                shippingAddress: '321 Elm St, Houston, TX 77001',
                orderDate: '2024-03-15 16:20:00',
                deliveryDate: '2024-03-19 14:30:00',
                trackingNumber: 'TRK987654321',
                notes: 'Signature required upon delivery'
            },
            {
                id: 5,
                orderNumber: 'ORD-2024-0005',
                customer: {
                    name: 'Lisa Anderson',
                    email: 'lisa.a@email.com',
                    phone: '+1 555-0127',
                    avatar: 'https://ui-avatars.com/api/?name=Lisa+Anderson&background=random'
                },
                items: [
                    {
                        name: 'Premium Leather Jacket',
                        seller: 'Fashion Hub',
                        price: 299.99,
                        quantity: 1,
                        image: 'https://images.unsplash.com/photo-1551028719-00167b16eac5?w=100'
                    }
                ],
                total: 299.99,
                status: 'cancelled',
                priority: 'low',
                paymentMethod: 'Credit Card',
                paymentStatus: 'refunded',
                shippingAddress: '654 Maple Dr, Phoenix, AZ 85001',
                orderDate: '2024-03-17 11:00:00',
                deliveryDate: null,
                trackingNumber: null,
                notes: 'Customer changed mind'
            }
        ];

        let currentTab = 'all';
        let filteredOrders = [...mockOrders];

        // Render orders
        function renderOrders() {
            const container = document.getElementById('ordersContainer');
            container.innerHTML = '';

            filteredOrders.forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-card bg-white rounded-xl shadow-sm border border-gray-200 p-6 relative overflow-hidden cursor-pointer';
                orderCard.onclick = () => viewOrder(order.id);
                
                orderCard.innerHTML = `
                    <div class="priority-indicator priority-${order.priority}"></div>
                    
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800">${order.orderNumber}</h3>
                            <p class="text-sm text-gray-600">${formatDateTime(order.orderDate)}</p>
                        </div>
                        <div class="text-right">
                            ${getStatusBadge(order.status)}
                            <p class="text-lg font-bold text-gray-800 mt-1">${order.total.toFixed(2)}</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <img src="${order.customer.avatar}" alt="${order.customer.name}" class="w-10 h-10 rounded-full mr-3">
                            <div>
                                <p class="font-medium text-gray-800">${order.customer.name}</p>
                                <p class="text-sm text-gray-600">${order.customer.email}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-sm text-gray-600">${order.items.length} item${order.items.length > 1 ? 's' : ''}</p>
                            <p class="text-xs text-gray-500">${order.paymentMethod}</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4 text-sm">
                        ${order.trackingNumber ? `
                            <div class="flex items-center text-blue-600">
                                <i class="fas fa-shipping-fast mr-1"></i>
                                <span>${order.trackingNumber}</span>
                            </div>
                        ` : ''}
                        ${order.notes ? `
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-sticky-note mr-1"></i>
                                <span>Has notes</span>
                            </div>
                        ` : ''}
                        <div class="flex items-center text-gray-600">
                            <i class="fas fa-map-marker-alt mr-1"></i>
                            <span>${order.shippingAddress.split(',')[0]}</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-100 flex items-center justify-between">
                        <div class="flex -space-x-2">
                            ${order.items.slice(0, 3).map(item => `
                                <img src="${item.image}" alt="${item.name}" class="w-8 h-8 rounded-full border-2 border-white">
                            `).join('')}
                            ${order.items.length > 3 ? `
                                <div class="w-8 h-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs font-medium">
                                    +${order.items.length - 3}
                                </div>
                            ` : ''}
                        </div>
                        <div class="flex space-x-2">
                            ${order.status === 'pending' ? `
                                <button onclick="event.stopPropagation(); processOrder(${order.id})" class="text-purple-600 hover:text-purple-700">
                                    <i class="fas fa-cog"></i>
                                </button>
                            ` : ''}
                            ${order.status === 'processing' ? `
                                <button onclick="event.stopPropagation(); shipOrder(${order.id})" class="text-blue-600 hover:text-blue-700">
                                    <i class="fas fa-truck"></i>
                                </button>
                            ` : ''}
                            <button onclick="event.stopPropagation(); viewOrder(${order.id})" class="text-gray-600 hover:text-gray-700">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(orderCard);
            });
        }

        function getStatusBadge(status) {
            const badges = {
                pending: '<span class="status-badge bg-yellow-100 text-yellow-800"><i class="fas fa-clock mr-1"></i>Pending</span>',
                processing: '<span class="status-badge bg-purple-100 text-purple-800"><i class="fas fa-cog mr-1"></i>Processing</span>',
                shipped: '<span class="status-badge bg-blue-100 text-blue-800"><i class="fas fa-truck mr-1"></i>Shipped</span>',
                delivered: '<span class="status-badge bg-green-100 text-green-800"><i class="fas fa-check-circle mr-1"></i>Delivered</span>',
                cancelled: '<span class="status-badge bg-red-100 text-red-800"><i class="fas fa-times-circle mr-1"></i>Cancelled</span>',
                refunded: '<span class="status-badge bg-gray-100 text-gray-800"><i class="fas fa-undo mr-1"></i>Refunded</span>'
            };
            return badges[status] || '';
        }

        function formatDateTime(dateTime) {
            const date = new Date(dateTime);
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        // Tab switching
        document.querySelectorAll('[data-tab]').forEach(tab => {
            tab.addEventListener('click', function() {
                // Update active tab styling
                document.querySelectorAll('[data-tab]').forEach(t => {
                    t.classList.remove('text-purple-600', 'border-b-2', 'border-purple-600');
                    t.classList.add('text-gray-600');
                });
                this.classList.remove('text-gray-600');
                this.classList.add('text-purple-600', 'border-b-2', 'border-purple-600');
                
                // Filter orders
                const tabName = this.dataset.tab;
                if (tabName === 'all') {
                    filteredOrders = [...mockOrders];
                } else {
                    filteredOrders = mockOrders.filter(o => o.status === tabName);
                }
                renderOrders();
            });
        });

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const search = e.target.value.toLowerCase();
            filteredOrders = mockOrders.filter(order => 
                order.orderNumber.toLowerCase().includes(search) ||
                order.customer.name.toLowerCase().includes(search) ||
                order.customer.email.toLowerCase().includes(search) ||
                order.items.some(item => item.name.toLowerCase().includes(search))
            );
            renderOrders();
        });

        // View order details
        function viewOrder(id) {
            const order = mockOrders.find(o => o.id === id);
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Order Info -->
                    <div class="lg:col-span-2 space-y-6">
                        <!-- Order Header -->
                        <div class="bg-gray-50 rounded-lg p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div>
                                    <h4 class="text-xl font-bold text-gray-800">${order.orderNumber}</h4>
                                    <p class="text-gray-600">Placed on ${formatDateTime(order.orderDate)}</p>
                                </div>
                                ${getStatusBadge(order.status)}
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <p class="text-sm text-gray-600">Payment Method</p>
                                    <p class="font-medium">${order.paymentMethod}</p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-600">Payment Status</p>
                                    <p class="font-medium capitalize">${order.paymentStatus}</p>
                                </div>
                                ${order.trackingNumber ? `
                                    <div>
                                        <p class="text-sm text-gray-600">Tracking Number</p>
                                        <p class="font-medium text-blue-600">${order.trackingNumber}</p>
                                    </div>
                                ` : ''}
                                ${order.deliveryDate ? `
                                    <div>
                                        <p class="text-sm text-gray-600">Delivered On</p>
                                        <p class="font-medium">${formatDateTime(order.deliveryDate)}</p>
                                    </div>
                                ` : ''}
                            </div>
                            
                            ${order.notes ? `
                                <div class="mt-4 p-3 bg-yellow-50 rounded-lg">
                                    <p class="text-sm font-medium text-yellow-800 mb-1">Order Notes:</p>
                                    <p class="text-sm text-yellow-700">${order.notes}</p>
                                </div>
                            ` : ''}
                        </div>
                        
                        <!-- Order Items -->
                        <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <h5 class="font-semibold text-gray-800">Order Items</h5>
                            </div>
                            <div class="divide-y divide-gray-200">
                                ${order.items.map(item => `
                                    <div class="p-4 flex items-center justify-between">
                                        <div class="flex items-center">
                                            <img src="${item.image}" alt="${item.name}" class="w-16 h-16 rounded-lg object-cover mr-4">
                                            <div>
                                                <p class="font-medium text-gray-800">${item.name}</p>
                                                <p class="text-sm text-gray-600">Sold by ${item.seller}</p>
                                                <p class="text-sm text-gray-600">Qty: ${item.quantity}</p>
                                            </div>
                                        </div>
                                        <p class="font-semibold text-gray-800">${(item.price * item.quantity).toFixed(2)}</p>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="px-6 py-4 bg-gray-50 border-t border-gray-200">
                                <div class="flex items-center justify-between text-lg font-semibold">
                                    <span>Total</span>
                                    <span>${order.total.toFixed(2)}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Order Timeline -->
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h5 class="font-semibold text-gray-800 mb-4">Order Timeline</h5>
                            <div class="space-y-1">
                                <div class="timeline-item">
                                    <p class="font-medium text-gray-800">Order Placed</p>
                                    <p class="text-sm text-gray-600">${formatDateTime(order.orderDate)}</p>
                                </div>
                                ${order.status !== 'pending' && order.status !== 'cancelled' ? `
                                    <div class="timeline-item">
                                        <p class="font-medium text-gray-800">Processing Started</p>
                                        <p class="text-sm text-gray-600">${formatDateTime(new Date(new Date(order.orderDate).getTime() + 3600000).toISOString())}</p>
                                    </div>
                                ` : ''}
                                ${order.status === 'shipped' || order.status === 'delivered' ? `
                                    <div class="timeline-item">
                                        <p class="font-medium text-gray-800">Order Shipped</p>
                                        <p class="text-sm text-gray-600">${formatDateTime(new Date(new Date(order.orderDate).getTime() + 86400000).toISOString())}</p>
                                    </div>
                                ` : ''}
                                ${order.status === 'delivered' ? `
                                    <div class="timeline-item">
                                        <p class="font-medium text-gray-800">Order Delivered</p>
                                        <p class="text-sm text-gray-600">${formatDateTime(order.deliveryDate)}</p>
                                    </div>
                                ` : ''}
                                ${order.status === 'cancelled' ? `
                                    <div class="timeline-item">
                                        <p class="font-medium text-gray-800 text-red-600">Order Cancelled</p>
                                        <p class="text-sm text-gray-600">${formatDateTime(new Date(new Date(order.orderDate).getTime() + 7200000).toISOString())}</p>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Customer & Shipping Info -->
                    <div class="space-y-6">
                        <!-- Customer Info -->
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h5 class="font-semibold text-gray-800 mb-4">Customer Information</h5>
                            <div class="flex items-center mb-4">
                                <img src="${order.customer.avatar}" alt="${order.customer.name}" class="w-12 h-12 rounded-full mr-3">
                                <div>
                                    <p class="font-medium text-gray-800">${order.customer.name}</p>
                                    <p class="text-sm text-gray-600">${order.customer.email}</p>
                                </div>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center text-gray-600">
                                    <i class="fas fa-phone w-4 mr-2"></i>
                                    <span>${order.customer.phone}</span>
                                </div>
                                <div class="flex items-center text-gray-600">
                                    <i class="fas fa-envelope w-4 mr-2"></i>
                                    <span>${order.customer.email}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Shipping Address -->
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h5 class="font-semibold text-gray-800 mb-4">Shipping Address</h5>
                            <p class="text-gray-600">${order.shippingAddress}</p>
                            <button class="mt-3 text-purple-600 hover:text-purple-700 text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-1"></i>
                                View on Map
                            </button>
                        </div>
                        
                        <!-- Actions -->
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h5 class="font-semibold text-gray-800 mb-4">Actions</h5>
                            <div class="space-y-3">
                                ${order.status === 'pending' ? `
                                    <button onclick="processOrder(${order.id})" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">
                                        <i class="fas fa-cog mr-2"></i>Process Order
                                    </button>
                                ` : ''}
                                ${order.status === 'processing' ? `
                                    <button onclick="shipOrder(${order.id})" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">
                                        <i class="fas fa-truck mr-2"></i>Mark as Shipped
                                    </button>
                                ` : ''}
                                ${order.status === 'shipped' ? `
                                    <button onclick="deliverOrder(${order.id})" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">
                                        <i class="fas fa-check-circle mr-2"></i>Mark as Delivered
                                    </button>
                                ` : ''}
                                ${order.status !== 'cancelled' && order.status !== 'delivered' && order.status !== 'refunded' ? `
                                    <button onclick="cancelOrder(${order.id})" class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700">
                                        <i class="fas fa-times-circle mr-2"></i>Cancel Order
                                    </button>
                                ` : ''}
                                ${order.status === 'delivered' && order.paymentStatus !== 'refunded' ? `
                                    <button onclick="refundOrder(${order.id})" class="w-full bg-yellow-600 text-white py-2 rounded-lg hover:bg-yellow-700">
                                        <i class="fas fa-undo mr-2"></i>Process Refund
                                    </button>
                                ` : ''}
                                <button onclick="printOrder(${order.id})" class="w-full bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300">
                                    <i class="fas fa-print mr-2"></i>Print Invoice
                                </button>
                                <button onclick="contactCustomer(${order.id})" class="w-full bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300">
                                    <i class="fas fa-envelope mr-2"></i>Contact Customer
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            showModal();
        }

        // Order actions
        function processOrder(id) {
            if (confirm('Are you sure you want to process this order?')) {
                const order = mockOrders.find(o => o.id === id);
                order.status = 'processing';
                renderOrders();
                closeModal();
                showNotification('Order is now being processed', 'success');
            }
        }

        function shipOrder(id) {
            const trackingNumber = prompt('Enter tracking number:');
            if (trackingNumber) {
                const order = mockOrders.find(o => o.id === id);
                order.status = 'shipped';
                order.trackingNumber = trackingNumber;
                renderOrders();
                closeModal();
                showNotification('Order marked as shipped', 'success');
            }
        }

        function deliverOrder(id) {
            if (confirm('Mark this order as delivered?')) {
                const order = mockOrders.find(o => o.id === id);
                order.status = 'delivered';
                order.deliveryDate = new Date().toISOString();
                renderOrders();
                closeModal();
                showNotification('Order marked as delivered', 'success');
            }
        }

        function cancelOrder(id) {
            const reason = prompt('Reason for cancellation:');
            if (reason) {
                const order = mockOrders.find(o => o.id === id);
                order.status = 'cancelled';
                order.notes = (order.notes ? order.notes + ' | ' : '') + 'Cancelled: ' + reason;
                renderOrders();
                closeModal();
                showNotification('Order cancelled', 'error');
            }
        }

        function refundOrder(id) {
            if (confirm('Process refund for this order?')) {
                const order = mockOrders.find(o => o.id === id);
                order.paymentStatus = 'refunded';
                order.status = 'refunded';
                renderOrders();
                closeModal();
                showNotification('Refund processed successfully', 'success');
            }
        }

        function printOrder(id) {
            alert('Printing invoice for order #' + id);
        }

        function contactCustomer(id) {
            alert('Opening email composer for order #' + id);
        }

        // Modal functions
        function showModal() {
            document.getElementById('orderModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('orderModal').classList.remove('show');
        }

        // Notification function
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-yellow-500'
            } text-white`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : 'exclamation'}-circle mr-2"></i>
                    ${message}
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Sidebar toggle
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
        });

        // Initialize
        renderOrders();
    </script>
</body>
</html>