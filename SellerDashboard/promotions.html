<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velvra Seller - Promotions & Coupons</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'charcoal': '#1a1a1a',
                        'gold': '#d4af37',
                        'cream': '#f8f6f0',
                        'pearl': '#fefcf7',
                        'beige': '#e8dcc6',
                        'stone': '#a8a196',
                        'brand': '#f8e9d3',
                        'velvra-gold-dark': '#B8941F',
                        'velvra-gold-light': '#E5C547'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .brand-font {
            font-family: 'Playfair Display', serif;
        }
        
        .promo-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .promo-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar-transition {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            animation: slideUp 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .usage-bar {
            transition: width 0.5s ease;
        }
        
        .code-display {
            font-family: 'Courier New', monospace;
            letter-spacing: 0.1em;
        }
        
        .countdown-timer {
            font-variant-numeric: tabular-nums;
        }
        
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background-color: #e8dcc6;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .toggle-switch.active {
            background-color: #d4af37;
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        
        .toggle-switch.active::after {
            transform: translateX(24px);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f8f6f0;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #B8941F;
        }
    </style>
</head>
<body class="bg-pearl">
    <!-- Mobile Menu Overlay -->
    <div id="mobileMenuOverlay" class="fixed inset-0 bg-charcoal bg-opacity-50 z-40 lg:hidden hidden"></div>

    <!-- Sidebar -->
    <aside id="sidebar" class="fixed top-0 left-0 z-50 h-full w-64 bg-charcoal sidebar-transition transform -translate-x-full lg:translate-x-0">
        <div class="flex flex-col h-full">
            <!-- Logo -->
            <div class="px-6 py-6 border-b border-stone/20">
                <h1 class="text-2xl font-bold text-gold brand-font">Velvra</h1>
                <p class="text-xs text-stone mt-1">Seller Dashboard</p>
            </div>
            
            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 overflow-y-auto">
                <ul class="space-y-2">
                    <li>
                        <a href="dashboard.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-home w-5"></i>
                            <span class="ml-3">Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="products.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-box w-5"></i>
                            <span class="ml-3">Products</span>
                        </a>
                    </li>
                    <li>
                        <a href="orders.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-shopping-cart w-5"></i>
                            <span class="ml-3">Orders</span>
                            <span class="ml-auto bg-gold text-charcoal text-xs px-2 py-1 rounded-full">12</span>
                        </a>
                    </li>
                    <li>
                        <a href="inventory.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-warehouse w-5"></i>
                            <span class="ml-3">Inventory</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 text-pearl bg-gold/20 rounded-lg transition-all">
                            <i class="fas fa-tag w-5"></i>
                            <span class="ml-3">Promotions</span>
                        </a>
                    </li>
                    <li>
                        <a href="analytics.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-chart-line w-5"></i>
                            <span class="ml-3">Analytics</span>
                        </a>
                    </li>
                    <li>
                        <a href="payouts.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-dollar-sign w-5"></i>
                            <span class="ml-3">Payouts</span>
                        </a>
                    </li>
                    <li>
                        <a href="messages.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-envelope w-5"></i>
                            <span class="ml-3">Messages</span>
                            <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full">3</span>
                        </a>
                    </li>
                    <li>
                        <a href="store-settings.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-store w-5"></i>
                            <span class="ml-3">Store Settings</span>
                        </a>
                    </li>
                    <li>
                        <a href="account.html" class="flex items-center px-4 py-3 text-stone hover:text-pearl hover:bg-gold/10 rounded-lg transition-all">
                            <i class="fas fa-user-cog w-5"></i>
                            <span class="ml-3">Account</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <!-- Profile Section -->
            <div class="px-4 py-4 border-t border-stone/20">
                <div class="flex items-center">
                    <img src="https://ui-avatars.com/api/?name=Fashion+Hub&background=d4af37&color=1a1a1a" alt="Store" class="w-10 h-10 rounded-full">
                    <div class="ml-3">
                        <p class="text-sm font-medium text-pearl">Fashion Hub</p>
                        <p class="text-xs text-stone">Premium Seller</p>
                    </div>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="lg:ml-64">
        <!-- Header -->
        <header class="bg-cream border-b border-beige sticky top-0 z-30">
            <div class="px-4 sm:px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <button id="mobileMenuBtn" class="lg:hidden mr-4 text-charcoal">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <div>
                            <h2 class="text-xl sm:text-2xl font-semibold text-charcoal">Promotions & Coupons</h2>
                            <p class="text-sm text-stone">Create and manage discount campaigns</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button onclick="openCreateModal()" class="flex items-center space-x-2 px-4 py-2 bg-gold text-charcoal rounded-lg hover:bg-velvra-gold-dark transition-colors">
                            <i class="fas fa-plus"></i>
                            <span class="hidden sm:inline font-medium">Create Coupon</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Promotions Content -->
        <main class="p-4 sm:p-6">
            <!-- Stats Overview -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <div class="bg-cream rounded-lg p-4 border border-beige">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs text-stone">Active Coupons</p>
                            <p class="text-xl font-bold text-charcoal">8</p>
                            <p class="text-xs text-green-600 mt-1">↑ 2 this week</p>
                        </div>
                        <i class="fas fa-ticket-alt text-gold"></i>
                    </div>
                </div>
                <div class="bg-cream rounded-lg p-4 border border-beige">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs text-stone">Total Uses</p>
                            <p class="text-xl font-bold text-charcoal">1,234</p>
                            <p class="text-xs text-stone mt-1">This month</p>
                        </div>
                        <i class="fas fa-users text-gold"></i>
                    </div>
                </div>
                <div class="bg-cream rounded-lg p-4 border border-beige">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs text-stone">Revenue Impact</p>
                            <p class="text-xl font-bold text-charcoal">$8.5k</p>
                            <p class="text-xs text-green-600 mt-1">↑ 15%</p>
                        </div>
                        <i class="fas fa-chart-line text-gold"></i>
                    </div>
                </div>
                <div class="bg-cream rounded-lg p-4 border border-beige">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs text-stone">Avg. Discount</p>
                            <p class="text-xl font-bold text-charcoal">18%</p>
                            <p class="text-xs text-stone mt-1">Per order</p>
                        </div>
                        <i class="fas fa-percentage text-gold"></i>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="bg-cream rounded-xl p-4 border border-beige mb-6">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="relative">
                        <input type="search" id="searchInput" placeholder="Search coupons..." 
                               class="w-full pl-10 pr-4 py-2 border border-beige rounded-lg bg-pearl focus:outline-none focus:border-gold text-charcoal">
                        <i class="fas fa-search absolute left-3 top-3 text-stone"></i>
                    </div>
                    
                    <select id="statusFilter" class="px-4 py-2 border border-beige rounded-lg bg-pearl focus:outline-none focus:border-gold text-charcoal">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="scheduled">Scheduled</option>
                        <option value="expired">Expired</option>
                        <option value="paused">Paused</option>
                    </select>
                    
                    <select id="typeFilter" class="px-4 py-2 border border-beige rounded-lg bg-pearl focus:outline-none focus:border-gold text-charcoal">
                        <option value="">All Types</option>
                        <option value="percentage">Percentage Off</option>
                        <option value="fixed">Fixed Amount</option>
                        <option value="bogo">Buy One Get One</option>
                        <option value="free-shipping">Free Shipping</option>
                    </select>
                    
                    <select id="sortBy" class="px-4 py-2 border border-beige rounded-lg bg-pearl focus:outline-none focus:border-gold text-charcoal">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="most-used">Most Used</option>
                        <option value="expiring">Expiring Soon</option>
                    </select>
                </div>
            </div>

            <!-- Promotions Grid -->
            <div id="promotionsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Promotion cards will be inserted here -->
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="hidden text-center py-12">
                <i class="fas fa-tags text-6xl text-stone mb-4"></i>
                <h3 class="text-xl font-semibold text-charcoal mb-2">No promotions yet</h3>
                <p class="text-stone mb-6">Create your first coupon to attract more customers</p>
                <button onclick="openCreateModal()" class="px-6 py-2 bg-gold text-charcoal rounded-lg hover:bg-velvra-gold-dark">
                    <i class="fas fa-plus mr-2"></i>Create Coupon
                </button>
            </div>
        </main>
    </div>

    <!-- Create/Edit Coupon Modal -->
    <div id="couponModal" class="modal">
        <div class="modal-content bg-pearl rounded-xl shadow-xl w-full max-w-2xl mx-4">
            <div class="p-6 border-b border-beige">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-semibold text-charcoal">Create New Coupon</h3>
                    <button onclick="closeModal()" class="text-stone hover:text-charcoal">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <form id="couponForm" class="p-6">
                <div class="space-y-6">
                    <!-- Basic Info -->
                    <div>
                        <label class="block text-sm font-medium text-charcoal mb-2">Coupon Code</label>
                        <input type="text" name="code" required placeholder="SUMMER24" 
                               class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold uppercase">
                        <p class="text-xs text-stone mt-1">Customers will enter this code at checkout</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-charcoal mb-2">Description</label>
                        <input type="text" name="description" required placeholder="Summer Sale - 25% off all items"
                               class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                    </div>
                    
                    <!-- Discount Type -->
                    <div>
                        <label class="block text-sm font-medium text-charcoal mb-2">Discount Type</label>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                            <label class="cursor-pointer">
                                <input type="radio" name="type" value="percentage" class="sr-only peer" checked>
                                <div class="p-3 border border-beige rounded-lg text-center peer-checked:border-gold peer-checked:bg-gold/10">
                                    <i class="fas fa-percentage text-gold mb-1"></i>
                                    <p class="text-sm">Percentage</p>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="type" value="fixed" class="sr-only peer">
                                <div class="p-3 border border-beige rounded-lg text-center peer-checked:border-gold peer-checked:bg-gold/10">
                                    <i class="fas fa-dollar-sign text-gold mb-1"></i>
                                    <p class="text-sm">Fixed</p>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="type" value="bogo" class="sr-only peer">
                                <div class="p-3 border border-beige rounded-lg text-center peer-checked:border-gold peer-checked:bg-gold/10">
                                    <i class="fas fa-gift text-gold mb-1"></i>
                                    <p class="text-sm">BOGO</p>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="type" value="free-shipping" class="sr-only peer">
                                <div class="p-3 border border-beige rounded-lg text-center peer-checked:border-gold peer-checked:bg-gold/10">
                                    <i class="fas fa-truck text-gold mb-1"></i>
                                    <p class="text-sm">Free Ship</p>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-charcoal mb-2">Discount Value</label>
                            <input type="number" name="value" required placeholder="25"
                                   class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-charcoal mb-2">Minimum Purchase</label>
                            <input type="number" name="minPurchase" placeholder="50"
                                   class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                        </div>
                    </div>
                    
                    <!-- Usage Limits -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-charcoal mb-2">Total Usage Limit</label>
                            <input type="number" name="totalLimit" placeholder="1000"
                                   class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                            <p class="text-xs text-stone mt-1">Leave empty for unlimited</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-charcoal mb-2">Per Customer Limit</label>
                            <input type="number" name="customerLimit" placeholder="1"
                                   class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                        </div>
                    </div>
                    
                    <!-- Validity Period -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-charcoal mb-2">Start Date</label>
                            <input type="datetime-local" name="startDate" required
                                   class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-charcoal mb-2">End Date</label>
                            <input type="datetime-local" name="endDate" required
                                   class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                        </div>
                    </div>
                    
                    <!-- Apply To -->
                    <div>
                        <label class="block text-sm font-medium text-charcoal mb-2">Apply To</label>
                        <select name="applyTo" class="w-full px-4 py-2 border border-beige rounded-lg bg-cream focus:outline-none focus:border-gold">
                            <option value="all">All Products</option>
                            <option value="category">Specific Categories</option>
                            <option value="products">Specific Products</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-beige flex justify-end space-x-3">
                    <button type="button" onclick="closeModal()" 
                            class="px-6 py-2 border border-beige text-charcoal rounded-lg hover:bg-cream">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="px-6 py-2 bg-gold text-charcoal rounded-lg hover:bg-velvra-gold-dark">
                        Create Coupon
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Mock promotions data
        const mockPromotions = [
            {
                id: 1,
                code: 'SUMMER24',
                description: 'Summer Sale - 25% off all items',
                type: 'percentage',
                value: 25,
                status: 'active',
                startDate: '2024-03-15',
                endDate: '2024-04-15',
                totalLimit: 1000,
                customerLimit: 1,
                usageCount: 342,
                minPurchase: 50,
                revenue: 8550,
                applyTo: 'All Products'
            },
            {
                id: 2,
                code: 'WELCOME10',
                description: 'New Customer - 10% off first order',
                type: 'percentage',
                value: 10,
                status: 'active',
                startDate: '2024-01-01',
                endDate: '2024-12-31',
                totalLimit: null,
                customerLimit: 1,
                usageCount: 156,
                minPurchase: 0,
                revenue: 3450,
                applyTo: 'All Products'
            },
            {
                id: 3,
                code: 'FREESHIP50',
                description: 'Free shipping on orders over $50',
                type: 'free-shipping',
                value: 0,
                status: 'active',
                startDate: '2024-03-01',
                endDate: '2024-03-31',
                totalLimit: 500,
                customerLimit: 3,
                usageCount: 423,
                minPurchase: 50,
                revenue: 12300,
                applyTo: 'All Products'
            },
            {
                id: 4,
                code: 'BOGO2024',
                description: 'Buy One Get One 50% off',
                type: 'bogo',
                value: 50,
                status: 'scheduled',
                startDate: '2024-04-01',
                endDate: '2024-04-07',
                totalLimit: 200,
                customerLimit: 2,
                usageCount: 0,
                minPurchase: 0,
                revenue: 0,
                applyTo: 'Accessories'
            },
            {
                id: 5,
                code: 'WINTER20',
                description: 'Winter clearance - 20% off',
                type: 'percentage',
                value: 20,
                status: 'expired',
                startDate: '2024-01-15',
                endDate: '2024-02-28',
                totalLimit: 1500,
                customerLimit: null,
                usageCount: 1387,
                minPurchase: 30,
                revenue: 28940,
                applyTo: 'Winter Collection'
            }
        ];

        // Initialize
        function init() {
            renderPromotions();
            setupEventListeners();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Mobile menu
            document.getElementById('mobileMenuBtn').addEventListener('click', () => {
                document.getElementById('sidebar').classList.toggle('-translate-x-full');
                document.getElementById('mobileMenuOverlay').classList.toggle('hidden');
            });

            document.getElementById('mobileMenuOverlay').addEventListener('click', () => {
                document.getElementById('sidebar').classList.add('-translate-x-full');
                document.getElementById('mobileMenuOverlay').classList.add('hidden');
            });

            // Filters
            document.getElementById('searchInput').addEventListener('input', filterPromotions);
            document.getElementById('statusFilter').addEventListener('change', filterPromotions);
            document.getElementById('typeFilter').addEventListener('change', filterPromotions);
            document.getElementById('sortBy').addEventListener('change', filterPromotions);

            // Form submission
            document.getElementById('couponForm').addEventListener('submit', (e) => {
                e.preventDefault();
                saveCoupon();
            });
        }

        // Render promotions
        function renderPromotions() {
            const container = document.getElementById('promotionsGrid');
            container.innerHTML = '';

            if (mockPromotions.length === 0) {
                document.getElementById('emptyState').classList.remove('hidden');
                return;
            }

            mockPromotions.forEach(promo => {
                const card = document.createElement('div');
                card.className = 'promo-card bg-cream rounded-xl border border-beige overflow-hidden';
                
                const isActive = promo.status === 'active';
                const isScheduled = promo.status === 'scheduled';
                const isExpired = promo.status === 'expired';
                
                const daysLeft = isActive ? Math.ceil((new Date(promo.endDate) - new Date()) / (1000 * 60 * 60 * 24)) : 0;
                const usagePercentage = promo.totalLimit ? (promo.usageCount / promo.totalLimit) * 100 : 0;
                
                card.innerHTML = `
                    <div class="bg-gradient-to-r from-gold to-velvra-gold-light p-6 text-charcoal">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h3 class="text-xl font-bold code-display">${promo.code}</h3>
                                <p class="text-sm opacity-80 mt-1">${promo.description}</p>
                            </div>
                            ${getStatusBadge(promo.status)}
                        </div>
                        
                        <div class="flex items-center space-x-4">
                            <div class="bg-charcoal bg-opacity-10 px-4 py-2 rounded-lg">
                                <p class="text-2xl font-bold">
                                    ${promo.type === 'percentage' ? promo.value + '%' : 
                                      promo.type === 'fixed' ? ' + promo.value : 
                                      promo.type === 'bogo' ? 'BOGO' :
                                      'FREE'}
                                </p>
                                <p class="text-xs opacity-80">
                                    ${promo.type === 'percentage' ? 'OFF' : 
                                      promo.type === 'fixed' ? 'OFF' : 
                                      promo.type === 'bogo' ? promo.value + '% OFF' :
                                      'SHIPPING'}
                                </p>
                            </div>
                            ${promo.minPurchase > 0 ? `
                                <div class="text-sm">
                                    <p class="opacity-80">Min. Purchase</p>
                                    <p class="font-semibold">${promo.minPurchase}</p>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div class="space-y-3 mb-4">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-stone">Valid Period</span>
                                <span class="font-medium text-charcoal">${formatDate(promo.startDate)} - ${formatDate(promo.endDate)}</span>
                            </div>
                            
                            ${isActive ? `
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-stone">Time Remaining</span>
                                    <span class="font-medium countdown-timer text-orange-600">
                                        <i class="fas fa-clock mr-1"></i>${daysLeft} days
                                    </span>
                                </div>
                            ` : ''}
                            
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-stone">Applies To</span>
                                <span class="font-medium text-charcoal">${promo.applyTo}</span>
                            </div>
                        </div>
                        
                        ${promo.totalLimit ? `
                            <div class="mb-4">
                                <div class="flex items-center justify-between text-sm mb-1">
                                    <span class="text-stone">Usage</span>
                                    <span class="font-medium text-charcoal">${promo.usageCount} / ${promo.totalLimit}</span>
                                </div>
                                <div class="bg-pearl rounded-full h-2 overflow-hidden">
                                    <div class="usage-bar bg-gradient-to-r from-gold to-velvra-gold-light h-2 rounded-full" style="width: ${usagePercentage}%"></div>
                                </div>
                            </div>
                        ` : `
                            <div class="flex items-center justify-between text-sm mb-4">
                                <span class="text-stone">Total Uses</span>
                                <span class="font-medium text-charcoal">${promo.usageCount}</span>
                            </div>
                        `}
                        
                        <div class="flex items-center justify-between pt-4 border-t border-beige">
                            <div>
                                <p class="text-xs text-stone">Revenue Generated</p>
                                <p class="text-lg font-bold text-green-600">${promo.revenue.toLocaleString()}</p>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="editCoupon(${promo.id})" class="p-2 text-gold hover:text-velvra-gold-dark">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="duplicateCoupon(${promo.id})" class="p-2 text-stone hover:text-charcoal">
                                    <i class="fas fa-copy"></i>
                                </button>
                                ${!isExpired ? `
                                    <button onclick="toggleCoupon(${promo.id})" class="p-2 ${isActive ? 'text-red-500 hover:text-red-600' : 'text-green-500 hover:text-green-600'}">
                                        <i class="fas fa-${isActive ? 'pause' : 'play'}"></i>
                                    </button>
                                ` : ''}
                                <button onclick="deleteCoupon(${promo.id})" class="p-2 text-red-500 hover:text-red-600">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // Get status badge
        function getStatusBadge(status) {
            const badges = {
                'active': '<span class="status-badge bg-green-100 text-green-700"><i class="fas fa-check-circle mr-1"></i>Active</span>',
                'scheduled': '<span class="status-badge bg-blue-100 text-blue-700"><i class="fas fa-clock mr-1"></i>Scheduled</span>',
                'expired': '<span class="status-badge bg-gray-100 text-gray-700"><i class="fas fa-times-circle mr-1"></i>Expired</span>',
                'paused': '<span class="status-badge bg-yellow-100 text-yellow-700"><i class="fas fa-pause-circle mr-1"></i>Paused</span>'
            };
            return badges[status] || '';
        }

        // Format date
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric'
            });
        }

        // Open create modal
        function openCreateModal() {
            document.getElementById('couponModal').classList.add('show');
            document.querySelector('#couponModal h3').textContent = 'Create New Coupon';
            document.getElementById('couponForm').reset();
        }

        // Edit coupon
        function editCoupon(id) {
            const promo = mockPromotions.find(p => p.id === id);
            if (promo) {
                document.getElementById('couponModal').classList.add('show');
                document.querySelector('#couponModal h3').textContent = 'Edit Coupon';
                // Pre-fill form
                document.querySelector('[name="code"]').value = promo.code;
                document.querySelector('[name="description"]').value = promo.description;
                // ... fill other fields
            }
        }

        // Duplicate coupon
        function duplicateCoupon(id) {
            const promo = mockPromotions.find(p => p.id === id);
            if (promo) {
                const newPromo = { ...promo, id: Date.now(), code: promo.code + '_COPY', usageCount: 0, revenue: 0 };
                mockPromotions.push(newPromo);
                renderPromotions();
                showNotification('Coupon duplicated successfully', 'success');
            }
        }

        // Toggle coupon
        function toggleCoupon(id) {
            const promo = mockPromotions.find(p => p.id === id);
            if (promo) {
                promo.status = promo.status === 'active' ? 'paused' : 'active';
                renderPromotions();
                showNotification(`Coupon ${promo.status === 'active' ? 'activated' : 'paused'}`, 'success');
            }
        }

        // Delete coupon
        function deleteCoupon(id) {
            if (confirm('Are you sure you want to delete this coupon?')) {
                const index = mockPromotions.findIndex(p => p.id === id);
                if (index > -1) {
                    mockPromotions.splice(index, 1);
                    renderPromotions();
                    showNotification('Coupon deleted successfully', 'success');
                }
            }
        }

        // Save coupon
        function saveCoupon() {
            const formData = new FormData(document.getElementById('couponForm'));
            const newPromo = {
                id: Date.now(),
                code: formData.get('code').toUpperCase(),
                description: formData.get('description'),
                type: formData.get('type'),
                value: parseInt(formData.get('value')),
                status: 'active',
                startDate: formData.get('startDate'),
                endDate: formData.get('endDate'),
                totalLimit: formData.get('totalLimit') ? parseInt(formData.get('totalLimit')) : null,
                customerLimit: formData.get('customerLimit') ? parseInt(formData.get('customerLimit')) : null,
                usageCount: 0,
                minPurchase: parseInt(formData.get('minPurchase')) || 0,
                revenue: 0,
                applyTo: formData.get('applyTo')
            };
            
            mockPromotions.unshift(newPromo);
            renderPromotions();
            closeModal();
            showNotification('Coupon created successfully', 'success');
        }

        // Filter promotions
        function filterPromotions() {
            // Implementation for filtering
            renderPromotions();
        }

        // Close modal
        function closeModal() {
            document.getElementById('couponModal').classList.remove('show');
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-blue-500 text-white'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'times-circle' : 'info-circle'} mr-2"></i>
                    ${message}
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize on load
        init();
    </script>
</body>
</html>