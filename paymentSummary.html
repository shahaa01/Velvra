<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Velvra - Checkout</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            overscroll-behavior: none;
        }
        
        .playfair {
            font-family: 'Playfair Display', serif;
        }
        
        .gold-gradient {
            background: linear-gradient(135deg, #D4AF37 0%, #F4E5B2 50%, #D4AF37 100%);
        }
        
        .gold-text {
            background: linear-gradient(135deg, #D4AF37 0%, #F4E5B2 50%, #D4AF37 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .luxury-shadow {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .bottom-sheet {
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .bottom-sheet.active {
            transform: translateY(0);
        }
        
        .slide-in {
            animation: slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .shimmer {
            position: relative;
            overflow: hidden;
        }
        
        .shimmer::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .touch-scale {
            transition: transform 0.1s ease;
        }
        
        .touch-scale:active {
            transform: scale(0.98);
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        input:focus {
            outline: none;
            border-color: #D4AF37;
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(4) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Main Container -->
    <div class="min-h-screen pb-24 md:pb-0">
        <!-- Header -->
        <div class="bg-white px-4 py-4 border-b border-gray-100 sticky top-0 z-40">
            <div class="flex items-center justify-between max-w-2xl mx-auto">
                <button class="p-2 -ml-2 touch-scale">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <h1 class="text-lg font-medium">Checkout</h1>
                <div class="w-6"></div>
            </div>
        </div>

        <div class="max-w-2xl mx-auto px-4 py-6 space-y-6 fade-in">
            <!-- Delivery Address -->
            <div class="bg-white rounded-2xl p-6 luxury-shadow">
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <h2 class="text-sm font-medium text-gray-500 mb-2">DELIVERY ADDRESS</h2>
                        <div id="addressContent">
                            <button id="addAddressBtn" class="flex items-center space-x-3 text-left touch-scale">
                                <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                </div>
                                <span class="font-medium">Add Delivery Address</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Overview -->
            <div class="bg-white rounded-2xl p-6 luxury-shadow">
                <h2 class="text-sm font-medium text-gray-500 mb-4">ORDER DETAILS</h2>
                <div class="flex space-x-4">
                    <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=200&h=200&fit=crop" 
                         alt="Product" class="w-20 h-20 object-cover rounded-xl">
                    <div class="flex-1">
                        <h3 class="font-medium text-gray-900">Silk Evening Dress</h3>
                        <p class="text-sm text-gray-500 mt-1">Size: M | Color: Midnight Blue</p>
                        <div class="flex items-center justify-between mt-3">
                            <div class="flex items-center space-x-3">
                                <span class="text-sm text-gray-500">Qty:</span>
                                <div class="flex items-center bg-gray-100 rounded-lg">
                                    <button class="p-2 touch-scale" onclick="updateQuantity(-1)">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                        </svg>
                                    </button>
                                    <span id="quantity" class="px-3 font-medium">1</span>
                                    <button class="p-2 touch-scale" onclick="updateQuantity(1)">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold">NPR 24,500</p>
                                <p class="text-sm text-gray-400 line-through">NPR 35,000</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coupon Section -->
            <div class="bg-white rounded-2xl p-6 luxury-shadow">
                <h2 class="text-sm font-medium text-gray-500 mb-4">PROMO CODE</h2>
                <div class="flex space-x-3">
                    <input type="text" id="couponInput" placeholder="Enter code" 
                           class="flex-1 px-4 py-3 bg-gray-50 rounded-xl text-sm border border-gray-200 transition-all">
                    <button id="applyBtn" class="px-6 py-3 bg-black text-white rounded-xl font-medium touch-scale">
                        Apply
                    </button>
                </div>
                <div id="couponMessage" class="mt-3 text-sm hidden"></div>
            </div>

            <!-- Payment Summary -->
            <div class="bg-white rounded-2xl p-6 luxury-shadow">
                <h2 class="text-sm font-medium text-gray-500 mb-4">PAYMENT SUMMARY</h2>
                <div class="space-y-3">
                    <div class="flex justify-between text-sm">
                        <span>Subtotal</span>
                        <span id="subtotal">NPR 24,500</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span>Shipping</span>
                        <span class="text-green-600">FREE</span>
                    </div>
                    <div id="discountRow" class="flex justify-between text-sm hidden">
                        <span>Discount</span>
                        <span class="text-green-600">- NPR <span id="discountAmount">0</span></span>
                    </div>
                    <div class="pt-3 border-t border-gray-100">
                        <div class="flex justify-between items-baseline">
                            <span class="font-medium">Total to Pay</span>
                            <span class="text-2xl font-semibold gold-text" id="totalPrice">NPR 24,500</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Delivery Info -->
            <div class="bg-white rounded-2xl p-6 luxury-shadow">
                <div class="flex items-center space-x-3 mb-4">
                    <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span class="text-sm font-medium">Estimated Delivery: 3-5 Business Days</span>
                </div>
                <div class="flex flex-wrap gap-3">
                    <div class="flex items-center space-x-2 text-xs text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        <span>Secure Checkout</span>
                    </div>
                    <div class="flex items-center space-x-2 text-xs text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                        </svg>
                        <span>Verified Seller</span>
                    </div>
                    <div class="flex items-center space-x-2 text-xs text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                        </svg>
                        <span>Cash on Delivery</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sticky Bottom CTA -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 p-4 z-50 md:relative md:max-w-2xl md:mx-auto md:border-0 md:bg-transparent">
        <button id="proceedBtn" class="w-full py-4 gold-gradient text-black font-medium rounded-2xl touch-scale shimmer relative overflow-hidden">
            <span class="relative z-10">Proceed to Pay</span>
        </button>
        <p class="text-center text-xs text-gray-500 mt-2">By proceeding, you agree to our Terms & Conditions</p>
    </div>

    <!-- <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-50">
        <div class="px-4 pt-4 pb-6 max-w-2xl mx-auto">
            <button id="confirmBtn" class="w-full py-4 gold-gradient text-white font-medium rounded-2xl touch-scale shimmer-gold pulse-glow relative overflow-hidden" onclick="processPayment()">
                <span class="relative z-10">Proceed to Pay</span>
            </button>
            <p class="text-center text-xs text-gray-500 mt-2">By proceeding, you agree to our Terms & Conditions</p>
        </div>
    </div> -->

    <!-- Address Sidebar -->
    <div id="addressSidebar" class="fixed inset-0 z-50 invisible">
        <div class="absolute inset-0 bg-black bg-opacity-50 transition-opacity opacity-0" onclick="closeAddressSidebar()"></div>
        <div class="absolute right-0 top-0 h-full w-full md:w-96 bg-white bottom-sheet">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold">Add Delivery Address</h2>
                    <button onclick="closeAddressSidebar()" class="p-2 -mr-2 touch-scale">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addressForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                        <input type="text" required class="w-full px-4 py-3 bg-gray-50 rounded-xl border border-gray-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                        <input type="tel" required class="w-full px-4 py-3 bg-gray-50 rounded-xl border border-gray-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Street Address</label>
                        <input type="text" required class="w-full px-4 py-3 bg-gray-50 rounded-xl border border-gray-200">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">City</label>
                            <input type="text" required class="w-full px-4 py-3 bg-gray-50 rounded-xl border border-gray-200">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Postal Code</label>
                            <input type="text" required class="w-full px-4 py-3 bg-gray-50 rounded-xl border border-gray-200">
                        </div>
                    </div>
                    <button type="submit" class="w-full py-4 bg-black text-white font-medium rounded-xl touch-scale mt-6">
                        Save Address
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        let quantity = 1;
        let basePrice = 24500;
        let discount = 0;
        let addressSaved = false;

        function updateQuantity(change) {
            quantity = Math.max(1, quantity + change);
            document.getElementById('quantity').textContent = quantity;
            updatePrices();
        }

        function updatePrices() {
            const subtotal = basePrice * quantity;
            const total = subtotal - discount;
            
            document.getElementById('subtotal').textContent = `NPR ${subtotal.toLocaleString()}`;
            document.getElementById('totalPrice').textContent = `NPR ${total.toLocaleString()}`;
        }

        document.getElementById('addAddressBtn').addEventListener('click', () => {
            openAddressSidebar();
        });

        function openAddressSidebar() {
            const sidebar = document.getElementById('addressSidebar');
            const sheet = sidebar.querySelector('.bottom-sheet');
            sidebar.classList.remove('invisible');
            setTimeout(() => {
                sidebar.querySelector('.bg-opacity-50').classList.add('opacity-100');
                sheet.classList.add('active');
            }, 10);
        }

        function closeAddressSidebar() {
            const sidebar = document.getElementById('addressSidebar');
            const sheet = sidebar.querySelector('.bottom-sheet');
            sidebar.querySelector('.bg-opacity-50').classList.remove('opacity-100');
            sheet.classList.remove('active');
            setTimeout(() => {
                sidebar.classList.add('invisible');
            }, 400);
        }

        document.getElementById('addressForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const name = formData.get('Full Name');
            const phone = formData.get('Phone Number');
            const address = formData.get('Street Address');
            const city = formData.get('City');
            
            document.getElementById('addressContent').innerHTML = `
                <div class="space-y-2">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="font-medium">${name}</p>
                            <p class="text-sm text-gray-600">${phone}</p>
                            <p class="text-sm text-gray-600">${address}</p>
                            <p class="text-sm text-gray-600">${city}</p>
                        </div>
                        <button onclick="openAddressSidebar()" class="text-sm text-gray-500 hover:text-gray-700 touch-scale">
                            Edit
                        </button>
                    </div>
                </div>
            `;
            addressSaved = true;
            closeAddressSidebar();
        });

        document.getElementById('applyBtn').addEventListener('click', () => {
            const couponInput = document.getElementById('couponInput');
            const message = document.getElementById('couponMessage');
            const code = couponInput.value.trim().toUpperCase();
            
            if (code === 'VELVRA20') {
                discount = Math.floor(basePrice * quantity * 0.2);
                document.getElementById('discountAmount').textContent = discount.toLocaleString();
                document.getElementById('discountRow').classList.remove('hidden');
                message.textContent = 'Coupon applied successfully!';
                message.className = 'mt-3 text-sm text-green-600 fade-in';
                message.classList.remove('hidden');
                updatePrices();
            } else if (code) {
                message.textContent = 'Invalid coupon code';
                message.className = 'mt-3 text-sm text-red-600 fade-in';
                message.classList.remove('hidden');
            }
        });

        document.getElementById('proceedBtn').addEventListener('click', function() {
            if (!addressSaved) {
                openAddressSidebar();
                return;
            }
            
            this.innerHTML = '<span class="loading-dots">Processing</span>';
            this.disabled = true;
            
            setTimeout(() => {
                this.innerHTML = '<span class="relative z-10">âœ“ Order Placed</span>';
                this.classList.add('bg-green-600');
                this.classList.remove('gold-gradient');
            }, 2000);
        });

        // Add touch feedback
        document.querySelectorAll('.touch-scale').forEach(el => {
            el.addEventListener('touchstart', () => el.classList.add('scale-95'));
            el.addEventListener('touchend', () => el.classList.remove('scale-95'));
        });
    </script>
</body>
</html>