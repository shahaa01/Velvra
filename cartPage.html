<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Velvra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== VELVRA LUXURY VARIABLES ===== */
        :root {
            --velvra-charcoal: #1a1a1a;
            --velvra-gold: #d4af37;
            --velvra-gold-light: #f4d03f;
            --velvra-cream: #f8f6f0;
            --velvra-pearl: #fefcf7;
            --velvra-beige: #e8dcc6;
            --velvra-stone: #a8a196;
            --velvra-shadow: rgba(26, 26, 26, 0.1);
            --velvra-shadow-dark: rgba(26, 26, 26, 0.15);
            --velvra-shadow-luxury: rgba(212, 175, 55, 0.2);
            --velvra-blur: blur(20px);
            --transition-luxury: cubic-bezier(0.23, 1, 0.320, 1);
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* ===== BASE STYLING ===== */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--velvra-pearl);
            color: var(--velvra-charcoal);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .font-playfair {
            font-family: 'Playfair Display', serif;
        }

        /* ===== MOBILE-FIRST CART ITEM STYLING ===== */
        .cart-item-mobile {
            background: white;
            border-radius: 20px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(0, 0, 0, 0.06);
            transition: all 0.3s var(--transition-luxury);
        }

        @media (min-width: 640px) {
            .cart-item-mobile {
                padding: 1.5rem;
                border-radius: 24px;
            }
        }

        .cart-item-mobile:active {
            transform: scale(0.99);
        }

        /* ===== MOBILE PRODUCT IMAGE ===== */
        .product-image-mobile {
            width: 100px;
            height: 130px;
            object-fit: cover;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        @media (min-width: 640px) {
            .product-image-mobile {
                width: 120px;
                height: 160px;
                border-radius: 20px;
            }
        }

        /* ===== MOBILE QUANTITY CONTROLS ===== */
        .quantity-controls-mobile {
            background: rgba(0, 0, 0, 0.04);
            border-radius: 30px;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.25rem;
            transition: all 0.3s var(--transition-luxury);
        }

        .quantity-btn-mobile {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s var(--transition-luxury);
            font-weight: 600;
            font-size: 18px;
            color: var(--velvra-charcoal);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .quantity-btn-mobile:active {
            transform: scale(0.9);
            background: var(--velvra-gold);
            color: white;
        }

        @media (hover: hover) {
            .quantity-btn-mobile:hover {
                background: var(--velvra-gold);
                color: white;
                transform: translateY(-2px);
                box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
            }
        }

        .quantity-input-mobile {
            width: 40px;
            text-align: center;
            border: none;
            background: transparent;
            font-weight: 600;
            font-size: 16px;
            color: var(--velvra-charcoal);
            pointer-events: none;
        }

        /* ===== MOBILE COLOR SWATCHES ===== */
        .color-options-mobile {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .color-swatch-mobile {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s var(--transition-luxury);
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .color-swatch-mobile.selected {
            border-color: var(--velvra-gold);
            transform: scale(1.15);
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
        }

        /* ===== MOBILE REMOVE BUTTON ===== */
        .remove-btn-mobile {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(239, 68, 68, 0.08);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s var(--transition-luxury);
            color: #ef4444;
        }

        .remove-btn-mobile:active {
            transform: scale(0.9);
            background: #ef4444;
            color: white;
        }

        /* ===== MOBILE PRICE DISPLAY ===== */
        .price-mobile {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--velvra-charcoal);
            line-height: 1;
        }

        .price-original-mobile {
            font-size: 0.875rem;
            color: #9ca3af;
            text-decoration: line-through;
            font-weight: 500;
        }

        /* ===== MOBILE STICKY SUMMARY ===== */
        .mobile-summary-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: var(--velvra-blur);
            border-top: 1px solid rgba(0, 0, 0, 0.06);
            padding: 1rem;
            z-index: 50;
            box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.08);
        }

        /* ===== MOBILE BADGES ===== */
        .badge-mobile {
            font-size: 0.625rem;
            font-weight: 700;
            padding: 0.25rem 0.625rem;
            border-radius: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        /* ===== DESKTOP STYLES (640px+) ===== */
        @media (min-width: 640px) {
            .mobile-only {
                display: none !important;
            }
            
            .desktop-only {
                display: block !important;
            }
        }

        /* ===== ANIMATION CLASSES ===== */
        .cart-item-enter {
            animation: slideInUp 0.5s var(--transition-luxury);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cart-item-remove {
            animation: slideOutLeft 0.4s var(--transition-luxury) forwards;
        }

        @keyframes slideOutLeft {
            to {
                opacity: 0;
                transform: translateX(-100%);
            }
        }

        /* ===== PREMIUM BUTTON MOBILE ===== */
        .btn-checkout-mobile {
            background: linear-gradient(135deg, var(--velvra-gold) 0%, var(--velvra-gold-light) 100%);
            color: var(--velvra-charcoal);
            border: none;
            padding: 1rem 2rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s var(--transition-luxury);
            border-radius: 30px;
            width: 100%;
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.25);
        }

        .btn-checkout-mobile:active {
            transform: scale(0.98);
        }

        /* ===== TRUST BADGES MOBILE ===== */
        .trust-badge-mobile {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.06);
            border-radius: 12px;
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 0.25rem;
            transition: all 0.3s var(--transition-luxury);
        }

        /* ===== LOADING SKELETON ===== */
        .skeleton {
            background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* ===== HAPTIC FEEDBACK SIMULATION ===== */
        .haptic {
            animation: haptic 0.1s var(--transition-bounce);
        }

        @keyframes haptic {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.98); }
        }

        /* ===== iOS SAFE AREAS ===== */
        @supports (padding: max(0px)) {
            .mobile-summary-bar {
                padding-bottom: max(1rem, env(safe-area-inset-bottom));
            }
        }

        /* ===== FOCUS STATES ===== */
        *:focus {
            outline: none;
        }

        *:focus-visible {
            outline: 2px solid var(--velvra-gold);
            outline-offset: 2px;
        }

        /* ===== SCROLLBAR HIDING ===== */
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        /* ===== DESKTOP ENHANCED STYLES ===== */
        @media (min-width: 1024px) {
            .cart-item-desktop {
                padding: 2rem;
                border-radius: 24px;
                margin-bottom: 1.5rem;
                transition: all 0.4s var(--transition-luxury);
            }

            .cart-item-desktop:hover {
                transform: translateY(-4px);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            }
        }

        /* ===== DESKTOP CART STYLES ===== */
        .desktop-cart-item {
            background: white;
            border-radius: 24px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.4s var(--transition-luxury);
        }

        .desktop-cart-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
        }

        /* ===== DESKTOP BUTTONS ===== */
        .btn-primary {
            background: linear-gradient(135deg, var(--velvra-charcoal) 0%, #2a2a2a 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.4s var(--transition-luxury);
            position: relative;
            overflow: hidden;
            border-radius: 12px;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(26, 26, 26, 0.3);
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--velvra-gold) 0%, var(--velvra-gold-light) 100%);
            color: var(--velvra-charcoal);
        }

        /* ===== TOAST STYLES ===== */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            padding: 0.75rem 1.5rem;
            border-radius: 30px;
            font-size: 0.875rem;
            font-weight: 500;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: all 0.3s var(--transition-luxury);
        }
        /* ===== PERFORMANCE OPTIMIZATIONS ===== */
.cart-item-mobile,
.desktop-cart-item {
    will-change: transform;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
}

/* Optimize scrolling performance */
body {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
}

/* Disable hover effects on touch devices for better performance */
@media (hover: none) and (pointer: coarse) {
    .quantity-btn-mobile:hover,
    .remove-btn-mobile:hover,
    .color-swatch-mobile:hover {
        transform: none !important;
        background: inherit !important;
    }
}

/* Optimize button transitions */
.quantity-btn-mobile,
.remove-btn-mobile,
.color-swatch-mobile,
.btn-checkout-mobile {
    transition: transform 0.1s ease-out, background-color 0.1s ease-out;
}
    </style>
</head>
<body>

<!-- Main Container -->
<div class="min-h-screen bg-gradient-to-b from-stone-50 to-stone-100/50">
    
    <!-- Header -->
    <header class="sticky top-0 z-40 bg-white/95 backdrop-blur-xl border-b border-stone-200/50">
        <div class="max-w-7xl mx-auto px-4 py-4 sm:py-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-xl sm:text-2xl lg:text-3xl font-playfair font-light text-gray-900">Shopping Cart</h1>
                    <p class="text-xs sm:text-sm text-gray-600 mt-0.5" id="itemCount">3 items</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Cart Items -->
    <div class="sm:hidden px-4 py-4 pb-32">
        <!-- Cart Item 1 - Mobile -->
        <div class="cart-item-mobile cart-item-enter">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=300&h=400&fit=crop&crop=center" 
                         alt="Tom Ford Cashmere Coat" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Tom Ford</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Cashmere Wool Double-Breasted Coat
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>Size: M</span>
                        <span>•</span>
                        <span>Charcoal</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹62,999</span>
                        <span class="price-original-mobile">₹89,999</span>
                        <span class="badge-mobile bg-red-500 text-white">30% OFF</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile selected" style="background-color: #2D2D2D" data-color="Charcoal"></button>
                    <button class="color-swatch-mobile" style="background-color: #8B4513" data-color="Camel"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="1">−</button>
                    <input type="number" value="1" min="1" class="quantity-input-mobile" data-item="1" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="1">+</button>
                </div>
            </div>
        </div>

        <!-- Cart Item 2 - Mobile -->
        <div class="cart-item-mobile cart-item-enter" style="animation-delay: 0.1s">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=300&h=400&fit=crop&crop=center" 
                         alt="Hermès Cashmere Scarf" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Hermès</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Cashmere Silk Luxury Scarf
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>One Size</span>
                        <span>•</span>
                        <span>Brown</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹15,999</span>
                        <span class="badge-mobile bg-green-500 text-white">FREE SHIP</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile" style="background-color: #D4AF37" data-color="Gold"></button>
                    <button class="color-swatch-mobile selected" style="background-color: #8B4513" data-color="Brown"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="2">−</button>
                    <input type="number" value="2" min="1" class="quantity-input-mobile" data-item="2" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="2">+</button>
                </div>
            </div>
        </div>

        <!-- Cart Item 3 - Mobile -->
        <div class="cart-item-mobile cart-item-enter" style="animation-delay: 0.2s">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=400&fit=crop&crop=center" 
                         alt="Berluti Leather Boots" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Berluti</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Handcrafted Leather Boots
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>Size: 42 EU</span>
                        <span>•</span>
                        <span>Brown</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹125,999</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="3">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile selected" style="background-color: #8B4513" data-color="Brown"></button>
                    <button class="color-swatch-mobile" style="background-color: #000000" data-color="Black"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="3">−</button>
                    <input type="number" value="1" min="1" class="quantity-input-mobile" data-item="3" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="3">+</button>
                </div>
            </div>
        </div>

                <div class="cart-item-mobile cart-item-enter" style="animation-delay: 0.2s">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=400&fit=crop&crop=center" 
                         alt="Berluti Leather Boots" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Berluti</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Handcrafted Leather Boots
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>Size: 42 EU</span>
                        <span>•</span>
                        <span>Brown</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹125,999</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="3">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile selected" style="background-color: #8B4513" data-color="Brown"></button>
                    <button class="color-swatch-mobile" style="background-color: #000000" data-color="Black"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="3">−</button>
                    <input type="number" value="1" min="1" class="quantity-input-mobile" data-item="3" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="3">+</button>
                </div>
            </div>
        </div>

                <div class="cart-item-mobile cart-item-enter" style="animation-delay: 0.2s">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=400&fit=crop&crop=center" 
                         alt="Berluti Leather Boots" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Berluti</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Handcrafted Leather Boots
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>Size: 42 EU</span>
                        <span>•</span>
                        <span>Brown</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹125,999</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="3">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile selected" style="background-color: #8B4513" data-color="Brown"></button>
                    <button class="color-swatch-mobile" style="background-color: #000000" data-color="Black"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="3">−</button>
                    <input type="number" value="1" min="1" class="quantity-input-mobile" data-item="3" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="3">+</button>
                </div>
            </div>
        </div>

                <div class="cart-item-mobile cart-item-enter" style="animation-delay: 0.2s">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=400&fit=crop&crop=center" 
                         alt="Berluti Leather Boots" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Berluti</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Handcrafted Leather Boots
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>Size: 42 EU</span>
                        <span>•</span>
                        <span>Brown</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹125,999</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="3">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile selected" style="background-color: #8B4513" data-color="Brown"></button>
                    <button class="color-swatch-mobile" style="background-color: #000000" data-color="Black"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="3">−</button>
                    <input type="number" value="1" min="1" class="quantity-input-mobile" data-item="3" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="3">+</button>
                </div>
            </div>
        </div>

                <div class="cart-item-mobile cart-item-enter" style="animation-delay: 0.2s">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=400&fit=crop&crop=center" 
                         alt="Berluti Leather Boots" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Berluti</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Handcrafted Leather Boots
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>Size: 42 EU</span>
                        <span>•</span>
                        <span>Brown</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹125,999</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="3">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile selected" style="background-color: #8B4513" data-color="Brown"></button>
                    <button class="color-swatch-mobile" style="background-color: #000000" data-color="Black"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="3">−</button>
                    <input type="number" value="1" min="1" class="quantity-input-mobile" data-item="3" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="3">+</button>
                </div>
            </div>
        </div>


        <div class="cart-item-mobile cart-item-enter" style="animation-delay: 0.2s">
            <!-- Main Product Row -->
            <div class="flex gap-3">
                <!-- Product Image -->
                <div class="flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=400&fit=crop&crop=center" 
                         alt="Berluti Leather Boots" 
                         class="product-image-mobile">
                </div>
                
                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <!-- Brand & Title -->
                    <div class="mb-2">
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Berluti</p>
                        <h3 class="text-sm font-medium text-gray-900 leading-tight line-clamp-2">
                            Handcrafted Leather Boots
                        </h3>
                    </div>
                    
                    <!-- Size & Color -->
                    <div class="flex items-center gap-3 text-xs text-gray-600 mb-3">
                        <span>Size: 42 EU</span>
                        <span>•</span>
                        <span>Brown</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-baseline gap-2">
                        <span class="price-mobile">₹125,999</span>
                    </div>
                </div>
                
                <!-- Remove Button -->
                <button class="remove-btn-mobile" data-item="3">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Bottom Actions Row -->
            <div class="mt-4 flex items-center justify-between">
                <!-- Color Options -->
                <div class="color-options-mobile">
                    <button class="color-swatch-mobile selected" style="background-color: #8B4513" data-color="Brown"></button>
                    <button class="color-swatch-mobile" style="background-color: #000000" data-color="Black"></button>
                </div>
                
                <!-- Quantity Controls -->
                <div class="quantity-controls-mobile">
                    <button class="quantity-btn-mobile decrease-btn" data-item="3">−</button>
                    <input type="number" value="1" min="1" class="quantity-input-mobile" data-item="3" readonly>
                    <button class="quantity-btn-mobile increase-btn" data-item="3">+</button>
                </div>
            </div>
        </div>

        <!-- Mobile Trust Badges -->
        <div class="grid grid-cols-3 gap-3 mt-6 mb-4">
            <div class="trust-badge-mobile">
                <svg class="w-5 h-5 text-green-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                </svg>
                <p class="text-xs font-semibold">Secure</p>
                <p class="text-xs text-gray-500">Checkout</p>
            </div>
            <div class="trust-badge-mobile">
                <svg class="w-5 h-5 text-blue-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
                <p class="text-xs font-semibold">30 Day</p>
                <p class="text-xs text-gray-500">Returns</p>
            </div>
            <div class="trust-badge-mobile">
                <svg class="w-5 h-5 text-yellow-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <p class="text-xs font-semibold">100%</p>
                <p class="text-xs text-gray-500">Authentic</p>
            </div>
        </div>

        <!-- Mobile Promo Code -->
        <div class="bg-white rounded-2xl p-4 border border-stone-200/50 mb-4">
            <button class="w-full flex items-center justify-between" id="mobilePromoToggle">
                <span class="text-sm font-medium text-gray-900">Apply Promo Code</span>
                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Desktop Cart Layout -->
    <div class="hidden sm:block max-w-7xl mx-auto px-4 py-6">
        <div class="grid lg:grid-cols-5 gap-8">
            <!-- Desktop Cart Items -->
            <div class="lg:col-span-3">
                <div class="space-y-4" id="desktopCartItems">
                    <!-- Desktop items will be rendered here by JavaScript -->
                </div>

                <!-- Desktop Trust Badges -->
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-8">
                    <div class="trust-badge-mobile p-4">
                        <svg class="w-5 h-5 text-green-600 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        <div>
                            <p class="font-semibold text-sm">Secure Checkout</p>
                            <p class="text-xs text-gray-600">SSL Protected</p>
                        </div>
                    </div>
                    <div class="trust-badge-mobile p-4">
                        <svg class="w-5 h-5 text-blue-600 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        <div>
                            <p class="font-semibold text-sm">Free Returns</p>
                            <p class="text-xs text-gray-600">30 Day Policy</p>
                        </div>
                    </div>
                    <div class="trust-badge-mobile p-4">
                        <svg class="w-5 h-5 text-yellow-600 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <p class="font-semibold text-sm">Verified Brands</p>
                            <p class="text-xs text-gray-600">100% Authentic</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Desktop Summary -->
            <div class="lg:col-span-2">
                <div class="sticky top-32">
                    <div class="bg-white rounded-2xl p-6 shadow-lg border border-stone-200">
                        <h2 class="text-xl font-playfair font-medium text-gray-900 mb-6">Order Summary</h2>
                        
                        <!-- Promo Code -->
                        <div class="mb-6">
                            <button class="w-full text-left flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors" id="promoToggle">
                                <span class="font-medium text-gray-900">Apply Promo Code</span>
                                <svg class="w-5 h-5 text-gray-600 transition-transform" id="promoIcon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="mt-4 hidden" id="promoForm">
                                <div class="flex gap-2">
                                    <input type="text" placeholder="Enter promo code" class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" id="promoInput">
                                    <button class="btn-gold px-4 py-3 rounded-lg" id="applyPromo">Apply</button>
                                </div>
                            </div>
                        </div>

                        <!-- Price Breakdown -->
                        <div class="space-y-4 mb-6">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">Subtotal</span>
                                <span class="font-medium" id="subtotal">₹220,996</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">Delivery</span>
                                <span class="font-medium text-green-600">Free</span>
                            </div>
                            <div class="flex justify-between items-center hidden" id="discountRow">
                                <span class="text-gray-600">Discount</span>
                                <span class="font-medium text-green-600" id="discount">-₹0</span>
                            </div>
                            <hr class="border-gray-200">
                            <div class="flex justify-between items-center text-lg">
                                <span class="font-semibold text-gray-900">Total</span>
                                <span class="font-bold text-2xl text-gray-900" id="desktopTotal">₹220,996</span>
                            </div>
                            <p class="text-sm text-gray-600 text-center">Free delivery on orders above ₹2,000</p>
                        </div>

                        <!-- Desktop Checkout Button -->
                        <button class="btn-primary btn-gold w-full py-4 text-lg rounded-xl" id="desktopCheckoutBtn">
                            Proceed to Checkout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Fixed Summary Bar -->
    <div class="mobile-summary-bar sm:hidden">
        <div class="flex items-center justify-between mb-3">
            <div>
                <p class="text-xs text-gray-500 uppercase tracking-wider font-semibold">Total</p>
                <p class="text-2xl font-bold text-gray-900" id="mobileTotal">₹220,996</p>
            </div>
            <div class="text-right">
                <p class="text-xs text-green-600 font-semibold">FREE DELIVERY</p>
                <p class="text-xs text-gray-500">on orders above ₹2,000</p>
            </div>
        </div>
        <button class="btn-checkout-mobile" id="mobileCheckoutBtn">
            Proceed to Checkout
        </button>
    </div>
</div>

<script>
// ===== VELVRA MOBILE-OPTIMIZED CART =====

class VelvraCart {
    constructor() {
        this.items = [
            { id: 1, name: 'Cashmere Wool Double-Breasted Coat', brand: 'Tom Ford', price: 89999, salePrice: 62999, quantity: 1, size: 'M', color: 'Charcoal' },
            { id: 2, name: 'Cashmere Silk Luxury Scarf', brand: 'Hermès', price: 15999, salePrice: null, quantity: 2, size: 'One Size', color: 'Brown' },
            { id: 3, name: 'Handcrafted Leather Boots', brand: 'Berluti', price: 125999, salePrice: null, quantity: 1, size: '42 EU', color: 'Brown' }
        ];
        this.promoCode = null;
        this.discount = 0;
        this.touchStartTime = 0;
        this.init();
    }

    init() {
        this.updateAllDisplays();
        this.renderDesktopItems();
        // Bind events only once after all items are rendered
        requestAnimationFrame(() => {
            this.bindEvents();
            this.setupMobileGestures();
        });
    }

    bindEvents() {
        // Use event delegation to avoid multiple bindings
        document.addEventListener('click', (e) => {
            // Fast click handler for immediate response
            e.preventDefault();
            
            const target = e.target;
            
            // Increase quantity
            if (target.classList.contains('increase-btn')) {
                const itemId = parseInt(target.dataset.item);
                this.changeQuantity(itemId, 1);
                this.quickHaptic(target);
            }
            
            // Decrease quantity
            else if (target.classList.contains('decrease-btn')) {
                const itemId = parseInt(target.dataset.item);
                this.changeQuantity(itemId, -1);
                this.quickHaptic(target);
            }
            
            // Remove item
            else if (target.closest('.remove-btn-mobile')) {
                const btn = target.closest('.remove-btn-mobile');
                const itemId = parseInt(btn.dataset.item);
                this.removeItem(itemId);
                this.quickHaptic(btn);
            }
            
            // Color swatch
            else if (target.classList.contains('color-swatch-mobile')) {
                const parent = target.closest('.cart-item-mobile') || target.closest('.desktop-cart-item');
                if (parent) {
                    parent.querySelectorAll('.color-swatch-mobile').forEach(s => s.classList.remove('selected'));
                    target.classList.add('selected');
                    this.quickHaptic(target);
                }
            }
            
            // Checkout buttons
            else if (target.id === 'mobileCheckoutBtn' || target.id === 'desktopCheckoutBtn') {
                this.proceedToCheckout(target);
                this.quickHaptic(target);
            }
            
            // Mobile promo
            else if (target.closest('#mobilePromoToggle')) {
                this.showMobilePromoModal();
                this.quickHaptic(target);
            }
            
            // Desktop promo toggle
            else if (target.closest('#promoToggle')) {
                this.togglePromoForm();
            }
            
            // Apply promo
            else if (target.id === 'applyPromo') {
                this.applyPromoCode();
            }
        }, { passive: false });

        // Optimize touch events for mobile
        document.addEventListener('touchstart', (e) => {
            this.touchStartTime = Date.now();
            const target = e.target;
            
            // Add visual feedback immediately
            if (target.classList.contains('quantity-btn-mobile') || 
                target.classList.contains('remove-btn-mobile') ||
                target.classList.contains('color-swatch-mobile') ||
                target.classList.contains('btn-checkout-mobile')) {
                target.style.transform = 'scale(0.95)';
            }
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            const target = e.target;
            
            // Remove visual feedback
            if (target.classList.contains('quantity-btn-mobile') || 
                target.classList.contains('remove-btn-mobile') ||
                target.classList.contains('color-swatch-mobile') ||
                target.classList.contains('btn-checkout-mobile')) {
                target.style.transform = '';
            }
        }, { passive: true });
    }

    changeQuantity(itemId, delta) {
        const item = this.items.find(i => i.id === itemId);
        if (item) {
            const newQuantity = item.quantity + delta;
            if (newQuantity >= 1 && newQuantity <= 99) {
                item.quantity = newQuantity;
                
                // Update display immediately without animations for faster response
                document.querySelectorAll(`input[data-item="${itemId}"]`).forEach(input => {
                    input.value = newQuantity;
                });
                
                // Update totals with RAF for smooth rendering
                requestAnimationFrame(() => {
                    this.updateAllDisplays();
                });
            }
        }
    }

    removeItem(itemId) {
        // Find elements
        const mobileItem = document.querySelector(`.cart-item-mobile .remove-btn-mobile[data-item="${itemId}"]`)?.closest('.cart-item-mobile');
        const desktopItem = document.querySelector(`#desktop-item-${itemId}`);
        
        // Animate removal
        if (mobileItem) {
            mobileItem.style.transition = 'all 0.3s ease-out';
            mobileItem.style.transform = 'translateX(-100%)';
            mobileItem.style.opacity = '0';
        }
        
        if (desktopItem) {
            desktopItem.style.transition = 'all 0.3s ease-out';
            desktopItem.style.transform = 'translateX(-100%)';
            desktopItem.style.opacity = '0';
        }
        
        // Remove from data and DOM after animation
        setTimeout(() => {
            this.items = this.items.filter(item => item.id !== itemId);
            if (mobileItem) mobileItem.remove();
            if (desktopItem) desktopItem.remove();
            
            this.updateAllDisplays();
            
            if (this.items.length === 0) {
                this.showEmptyCart();
            }
        }, 50);
    }

    updateAllDisplays() {
        const subtotal = this.items.reduce((sum, item) => {
            const price = item.salePrice || item.price;
            return sum + (price * item.quantity);
        }, 0);

        const finalTotal = subtotal - this.discount;

        // Batch DOM updates
        const updates = {
            'mobileTotal': `₹${finalTotal.toLocaleString()}`,
            'desktopTotal': `₹${finalTotal.toLocaleString()}`,
            'subtotal': `₹${subtotal.toLocaleString()}`
        };

        Object.entries(updates).forEach(([id, value]) => {
            const element = document.getElementById(id);
            if (element && element.textContent !== value) {
                element.textContent = value;
            }
        });

        // Update discount if applicable
        if (this.discount > 0) {
            const discountRow = document.getElementById('discountRow');
            const discountAmount = document.getElementById('discount');
            if (discountRow && discountAmount) {
                discountRow.classList.remove('hidden');
                discountAmount.textContent = `-₹${this.discount.toLocaleString()}`;
            }
        }

        // Update item count
        const totalItems = this.items.reduce((sum, item) => sum + item.quantity, 0);
        const itemCountEl = document.getElementById('itemCount');
        if (itemCountEl) {
            itemCountEl.textContent = `${totalItems} ${totalItems === 1 ? 'item' : 'items'}`;
        }
    }

    renderDesktopItems() {
        const container = document.getElementById('desktopCartItems');
        if (!container) return;

        container.innerHTML = this.items.map(item => `
            <div id="desktop-item-${item.id}" class="desktop-cart-item">
                <div class="flex gap-4">
                    <img src="${this.getImageUrl(item.id)}" alt="${item.name}" class="w-32 h-42 object-cover rounded-xl">
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">${item.brand}</p>
                                <h3 class="text-lg font-medium text-gray-900">${item.name}</h3>
                            </div>
                            <button class="remove-btn-mobile" data-item="${item.id}">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="flex items-center gap-4 mb-4">
                            <span class="text-sm text-gray-600">Size: ${item.size}</span>
                            <span class="text-sm text-gray-600">Color: ${item.color}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <span class="text-xl font-bold">₹${(item.salePrice || item.price).toLocaleString()}</span>
                                ${item.salePrice ? `<span class="text-sm text-gray-500 line-through ml-2">₹${item.price.toLocaleString()}</span>` : ''}
                            </div>
                            <div class="quantity-controls-mobile">
                                <button class="quantity-btn-mobile decrease-btn" data-item="${item.id}">−</button>
                                <input type="number" value="${item.quantity}" class="quantity-input-mobile" data-item="${item.id}" readonly>
                                <button class="quantity-btn-mobile increase-btn" data-item="${item.id}">+</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    getImageUrl(itemId) {
        const images = {
            1: 'https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=300&h=400&fit=crop&crop=center',
            2: 'https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=300&h=400&fit=crop&crop=center',
            3: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=400&fit=crop&crop=center'
        };
        return images[itemId] || '';
    }

    togglePromoForm() {
        const form = document.getElementById('promoForm');
        const icon = document.getElementById('promoIcon');
        
        if (form.classList.contains('hidden')) {
            form.classList.remove('hidden');
            icon.style.transform = 'rotate(180deg)';
        } else {
            form.classList.add('hidden');
            icon.style.transform = 'rotate(0deg)';
        }
    }

    applyPromoCode() {
        const input = document.getElementById('promoInput');
        const code = input.value.trim().toUpperCase();
        
        const validCodes = {
            'FIRST10': { type: 'percentage', value: 10 },
            'SAVE20': { type: 'fixed', value: 2000, minOrder: 10000 }
        };

        if (validCodes[code]) {
            const promo = validCodes[code];
            const subtotal = this.items.reduce((sum, item) => {
                const price = item.salePrice || item.price;
                return sum + (price * item.quantity);
            }, 0);

            if (promo.minOrder && subtotal < promo.minOrder) {
                this.showToast(`Minimum order of ₹${promo.minOrder.toLocaleString()} required`, 'error');
                return;
            }

            if (promo.type === 'percentage') {
                this.discount = Math.floor(subtotal * (promo.value / 100));
            } else {
                this.discount = promo.value;
            }

            this.promoCode = code;
            this.updateAllDisplays();
            this.showToast(`Promo code ${code} applied!`, 'success');
            input.value = '';
        } else {
            this.showToast('Invalid promo code', 'error');
        }
    }

    showEmptyCart() {
        const mobileContainer = document.querySelector('.sm\\:hidden.px-4.py-4');
        const desktopContainer = document.getElementById('desktopCartItems');
        
        const emptyContent = `
            <div class="text-center py-20">
                <svg class="mx-auto w-20 h-20 text-gray-300 mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l-1 7a2 2 0 01-2 2H8a2 2 0 01-2-2L5 9z"></path>
                </svg>
                <h3 class="text-xl font-playfair font-light text-gray-900 mb-2">Your cart is empty</h3>
                <p class="text-sm text-gray-600 mb-6">Discover our luxury collection</p>
                <button class="btn-checkout-mobile" onclick="window.location.href='/shop'">
                    Continue Shopping
                </button>
            </div>
        `;

        if (mobileContainer) {
            mobileContainer.innerHTML = emptyContent;
        }
        if (desktopContainer) {
            desktopContainer.innerHTML = emptyContent;
        }

        const summaryBar = document.querySelector('.mobile-summary-bar');
        if (summaryBar) {
            summaryBar.style.display = 'none';
        }
    }

    proceedToCheckout(btn) {
        const originalText = btn.textContent;
        btn.textContent = 'Processing...';
        btn.disabled = true;
        
        setTimeout(() => {
            this.showToast('Redirecting to checkout...', 'success');
            btn.textContent = originalText;
            btn.disabled = false;
            
            console.log('Checkout with items:', this.items);
        }, 1500);
    }

    showMobilePromoModal() {
        this.showToast('Promo codes coming soon!', 'info');
    }

    showToast(message, type = 'info') {
        const toast = document.createElement('div');
        const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-gray-800';
        
        toast.className = `fixed top-20 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 rounded-full text-white text-sm font-medium ${bgColor} shadow-lg transition-all duration-300 opacity-0 translate-y-2`;
        toast.textContent = message;
        
        document.body.appendChild(toast);
        
        requestAnimationFrame(() => {
            toast.classList.remove('opacity-0', 'translate-y-2');
        });
        
        setTimeout(() => {
            toast.classList.add('opacity-0', 'translate-y-2');
            setTimeout(() => document.body.removeChild(toast), 300);
        }, 3000);
    }

    quickHaptic(element) {
        // Quick visual feedback without delay
        if ('vibrate' in navigator) {
            navigator.vibrate(10);
        }
    }

    setupMobileGestures() {
        // Simplified swipe gestures with better performance
        let startX = 0;
        let currentItem = null;
        let isSwiping = false;

        document.addEventListener('touchstart', (e) => {
            const item = e.target.closest('.cart-item-mobile');
            if (item) {
                startX = e.touches[0].clientX;
                currentItem = item;
                isSwiping = false;
            }
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            if (!currentItem) return;
            
            const deltaX = e.touches[0].clientX - startX;
            
            if (Math.abs(deltaX) > 10) {
                isSwiping = true;
                const translateX = Math.max(-80, Math.min(0, deltaX));
                currentItem.style.transform = `translateX(${translateX}px)`;
            }
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            if (!currentItem || !isSwiping) {
                currentItem = null;
                return;
            }
            
            const deltaX = e.changedTouches[0].clientX - startX;
            
            if (deltaX < -50) {
                currentItem.style.transform = 'translateX(-80px)';
            } else {
                currentItem.style.transform = '';
            }
            
            currentItem = null;
            isSwiping = false;
        }, { passive: true });
    }
}

// Initialize cart when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Optimize initial render
    requestAnimationFrame(() => {
        const cart = new VelvraCart();
    });
    
    // Prevent zoom on double tap
    let lastTouchEnd = 0;
    document.addEventListener('touchend', (e) => {
        const now = Date.now();
        if (now - lastTouchEnd <= 300) {
            e.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
    
    // Optimize viewport height for mobile browsers
    const setVH = () => {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
    };
    
    setVH();
    window.addEventListener('resize', setVH);
    window.addEventListener('orientationchange', setVH);
});
</script>

</body>
</html>