<% layout('layouts/boilerplate.ejs') %>

<section class="min-h-screen bg-velvra-pearl p-6">
  <div class="max-w-6xl mx-auto">
    <!-- Error Header -->
    <div class="mb-8 text-center">
      <h1 class="text-4xl font-playfair font-bold text-red-600 mb-4">
        ðŸš¨ Development Error
      </h1>
      <p class="text-velvra-stone">
        This is a detailed error view for development purposes only.
      </p>
    </div>

    <!-- Error Details -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Error Info -->
      <div class="bg-white rounded-2xl shadow-xl p-6">
        <h2 class="text-2xl font-playfair font-semibold text-velvra-charcoal mb-4">
          Error Information
        </h2>
        
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">Message</label>
            <p class="text-red-600 font-medium"><%= error.message %></p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">Status Code</label>
            <p class="text-velvra-charcoal"><%= error.statusCode || 'N/A' %></p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">Error Name</label>
            <p class="text-velvra-charcoal"><%= error.name || 'N/A' %></p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">Stack Trace</label>
            <pre class="bg-gray-100 p-4 rounded-lg text-xs overflow-x-auto text-velvra-charcoal"><%= error.stack %></pre>
          </div>
        </div>
      </div>

      <!-- Request Info -->
      <div class="bg-white rounded-2xl shadow-xl p-6">
        <h2 class="text-2xl font-playfair font-semibold text-velvra-charcoal mb-4">
          Request Information
        </h2>
        
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">URL</label>
            <p class="text-velvra-charcoal break-all"><%= req.originalUrl %></p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">Method</label>
            <p class="text-velvra-charcoal"><%= req.method %></p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">User</label>
            <p class="text-velvra-charcoal">
              <%= req.user ? `${req.user.firstName} ${req.user.lastName} (${req.user._id})` : 'Not logged in' %>
            </p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">User Agent</label>
            <p class="text-velvra-charcoal text-sm break-all"><%= req.headers['user-agent'] %></p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-velvra-stone mb-1">IP Address</label>
            <p class="text-velvra-charcoal"><%= req.ip %></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
      <a href="/home" 
         class="gold-gradient text-white font-semibold px-8 py-4 rounded-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-500 text-center">
        Return Home
      </a>
      <button onclick="history.back()" 
              class="border-2 border-velvra-charcoal text-velvra-charcoal font-semibold px-8 py-4 rounded-xl hover:bg-velvra-charcoal hover:text-white transition-all duration-300">
        Go Back
      </button>
      <button onclick="location.reload()" 
              class="bg-blue-600 text-white font-semibold px-8 py-4 rounded-xl hover:bg-blue-700 transition-all duration-300">
        Reload Page
      </button>
    </div>

    <!-- Environment Warning -->
    <div class="mt-8 bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center">
      <div class="flex items-center justify-center mb-2">
        <svg class="w-6 h-6 text-yellow-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
        </svg>
        <span class="text-yellow-800 font-semibold">Development Mode</span>
      </div>
      <p class="text-yellow-700">
        This detailed error view is only shown in development. In production, users will see a user-friendly error message.
      </p>
    </div>
  </div>
</section> 